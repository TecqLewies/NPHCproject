# NPHC project

## Description
This project was done as part of a coding challenge for NPHC. For this project, I am looking to test an application that has both a webpage UI and api endpoints. It seeks to simulate a scenario where taxpayers are provided tax relief in the form of monetary cashback. Three identified users for this system under test are clerks that are able to upload taxpayer information via API or UI, bookkeepers to retrieve calculated tax relief for each person, and the governor to dispense the tax relief at the click of a button.

For automated scripting, I had used Python as my programming language of choice due to its simplicity and available resources, and RobotFramework as a high-level, keyword driven testing framework. More details on the exact libraries and versions can be found later.


## How to run
To run a copy of this project, you can clone this repository to your local machine and IDE of choice. Follow the steps on https://docs.github.com/en/get-started/quickstart/fork-a-repo if you are unsure on how to fork and clone from github.

To begin running the test scripts, you will need to run the jar file to run the application on your local machine first. It can be found here https://github.com/strengthandwill/oppenheimer-project-dev with more details. After the jar file is downloaded and running locally, you can navigate to http://localhost:8080/ to view how the UI is setup. The associated swagger page with its API endpoints can be found here as well.

After the project has been downloaded, navigate to the folder containing the testcases in ./oppenheimerNPHC/TestCases

The test scrips can be run using the following commands

```
#Runs all the test cases in the project directory
robot ./

#Runs a specific test case
robot ./UserStory1.robot

#Runs test cases with a specific tag
robot -i smoke ./

#Runs test cases except those with specific tag
robot -e smoke ./
```

After running the test cases, you can view the test report generated by the RobotFramework in-built reporting tool found at /oppenheimerNPHC/TestCases/report.html with Right-click -> Open in -> Browser -> Chrome

I had included the allure-robotframework reporting tool that allows for allure reports to be generated that is comparatively more visually appealing and intuitive than the in-built reporting tool. We would need to run the testcases with a listener for allure which will create a output directory at /oppenheimerNPHC/TestCases which will be used to view the allure report

```

# Runs allure-robotframework listener with robot
robot --listener allure_robotframework ./

#Creates and directs you to the allure report that is hosted locally
#It stops working if you cancel the terminal process
allure serve ./output/allure

#Creates an folder under Project Directory named allure-report with reporting data and index.html file
allure generate ./output/allure

```

## Packages and versioning
| Packages | Versions |
| -------- | -------- |
| robotframework | 6.0.2 |
| robotframework-requests | 0.9.4 |
| robotframework-jsonlibrary | 0.5 |
| robotframework-seleniumlibrary | 6.0.0 |
| requests | 2.28.2 |
| allure-robotframework | 2.12.0 |

| WebDrivers | Versions |
| ---------- | -------- |
| Chrome | 108.0.5359.71 |
| Gecko | 0.32.0 |
| Edge | 108.0.1462.54 |

Python - 3.11.1

## Testing tags
Testcases within the project have been individually tagged with specific tag/s such that I can include or exclude any groups of testcases in accordance to their tags based on needs. A summary of how the tags have been included are as follows

Functional - Testcases which tests the functionality of a feature. This covers all testcases for this project
US1/2/3/4/5 - Testcases that are associated with a specific user story for this project
Positive/Negative - Testcases that tests the expected behaviour of system with valid/invalid data
Smoke - Testcases which are considered for smoke testing
Edge/Firefox/Chrome - Testcases which looks at which browser is being used for portability
AgeFilter/GenderFilter/RoundFilter/MinReliefFilter - Testcases which tests the tax relief calculation algorithmn for userstory 4

## Defect report

### Defect 1

###### Defect description
When tax relief is calculated to end in some decimal, we expect it to be rounded to the nearest whole number by the system. When looking at the range of decimals .51-.99, no rounding up occurs.
###### Expected results
When tax relief ends with decimals in range .51-.99, we expected it to be rounded up to the nearest whole number. E.g. 9999.51 ~ 10000
###### Actions to take
To implement or fix the rounding up of values within the tax relief calculation algorithm
###### Steps to reproduce
Create a request body to insert data via endpoints /calculator/insert , /calculator/insertMultiple or via a .csv file on the UI portal. Include data such that the expected tax relief will be ending with decimals in the .51-.99 range.
###### Script tags
Functional/Positive/US4/RoundingFilter
###### Test data
birthday=01012007,gender=M,name=Lewies,natid=s12345678a,salary=10000,tax=9899.49

### Defect 2

###### Defect description
When calculated tax relief is zero, the tax relief displayed on the UI portal and retrieved by API is non-zero. It appears to be displaying one-fouth of input salary in such situations.
###### Expected results
It is expected that for tax relief to be calculated to be zero, that the UI portal and API response body reflect that when queried.
###### Actions to take
To find and fix error within algorithm of system that returns non-zero values of tax relief when it is supposed to
###### Steps to reproduce
Create a request body to insert data via endpoints /calculator/insert , /calculator/insertMultiple or via a .csv file on the UI portal. Include data such that the expected tax relief will be zero.
###### Script tags
Functional/Positive/Smoke/US4/MinReliefFilter
###### Test data
birthday=01012007,gender=M,name=Lewies,natid=s12345678a,salary=10000,tax=10000

### Other defects
Other forms of defects have been found during negative testing that are too numerous to list. However, more details can be found in the OppenheimerNPHCdocument excel file that has been uploaded as part of the project. Constraints within the system should be added to reject data that are invalid and return some error message or error code where appropriate.

## Improvements
### Non-functional testing
Ideally, non-functional testing should also be done to complement the functional testing covered by my test scripts. We can use SoapUI to perform load testing for the APIs and run parallel threads to simulate multiple users and requests and measure any deterioration in response times. We can also use JMeter to perform the same type of load testing for both API and application UI.

### Parallel execution
In real-life scenarios where the number of testcases may far exceed what I have created, the test execution runtime could be unfeasible, taking several hours. What we can endeavour to do is to include parallel execution of testcases using the robotframework-pabot library. Using parallel execution, it is expected that total test execution time can be reduced significantly.

## Results
### Total tests - 145
### Tests passed - 100
### Tests failed - 45

![oppenheimerNPHC allure results](https://user-images.githubusercontent.com/124225074/220814651-c321a4ea-bd6d-44a8-9f47-511b1e257bfa.PNG)

A test document OppenheimerNPHCdocument.xlsx has been attached to the project that specifies the passed/failed test case in more detail for each user story, including test description and test steps. The allure report can also be ran to better visualise the test script results as per the 'How to run' section above.
